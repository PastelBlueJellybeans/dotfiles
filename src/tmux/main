
# Replace the existing .tmux.conf file with this single command, replacing
# $DOTFILES with the directory you keep your dotfiles under. this is useful
# for keeping them under version control
# for keeping your dotfiles under version control
#
# ~/.tmux.conf:
# >>> source-file $DOTFILES/tmux/tmux.conf


# TODO:
# Bind a respawn key which
#   prompts the user
#   respawns the pane
#
# dim non-active panes
#
# use same pwd for new panes after split/refresh
#
# get ; for command-prompt

unbind-key -a

# {{{ mouse settings
set-option -g mouse on
bind-key -T root MouseDrag1Border resize-pane -M
bind-key -T root MouseDown1Status select-window -t =
# this seems to cause an issue on startup
# bind-key -T root MouseDown1Pane select-pane -t = ; send-keys -M
# }}}
# {{{ core settings
set-option -g prefix 'C-space'
set-option -g default-terminal "screen-256color"
set-option -g history-limit 100000
set-option -g repeat-time 750
set-option -g mode-keys vi
set-option -g status-keys vi

bind-key -T prefix R source-file ~/.tmux.conf \; \
                     refresh-client \; \
                     display-message "source-file done"
bind-key -T prefix : command-prompt
bind-key -T prefix ? list-keys
bind-key -T prefix q confirm-before -p "detach session (y/n)?" detach
bind-key -T prefix Q confirm-before -p "kill server (y/n)?" kill-server
bind-key -T prefix ] copy-mode
# }}}
# {{{ status bar
set-option -g status-position top
set-option -g status on
set-option -g display-time 15000
set-option -g status-left '[#(hostname)] '
set-option -g status-style "bg=#555555 fg=#CCCCCC"
set-option -g status-left-length 150
set-option -g window-status-format "#W"
set-option -g window-status-current-format "#W"
set-option -g window-status-current-bg green
# }}}
# {{{ window controls
bind-key -T window r command-prompt "rename-window '%%'"
bind-key -T window n command-prompt "new-window -n '%%' -c '#{pane_current_path}'"
bind-key -T window x confirm-before -p "kill window #W? (y/n)" kill-window
bind-key -T prefix -r , previous-window
bind-key -T prefix -r . next-window
bind-key -T prefix w switch-client -T window
# }}}
# {{{ pane controls
bind-key -T prefix - split-window -v
bind-key -T prefix \ split-window -h
bind-key -T prefix x kill-pane
bind-key -T prefix k respawn-pane -k
set-hook -g pane-died "respawn-pane -k"
bind-key -T prefix + select-layout main-vertical\; \
                     resize-pane -t 0 -x 95
bind-key -T prefix z resize-pane -Z

bind-key -T root 'c-j' select-pane -D
bind-key -T root 'c-k' select-pane -U
bind-key -T root 'c-l' select-pane -R
bind-key -T root 'c-h' select-pane -L
# }}}
# {{{ Session centric settings

# bind-key -T prefix C choose-session
# bind-key -T prefix R command-prompt "rename-session '%%'"
# bind-key -T prefix X confirm-before -p "kill session #S? (y/n)" kill-session
# bind-key -T prefix N command-prompt "new -s '%%' -c '#{pane_current_path}'"

# set-option -g status-left '#(exec tmux ls | sed 's/:.*//' | tr "\\n" " ")'
# set-option -g window-status-current-format ''
# set-option -g status-left-length 60
# set-option -g status-right '"#{=21:USER}@#H" %H:%M %d-%b-%y'
# set-option -g status-style "bg=black fg=white"

# }}}
# {{{ Window centric settings

# bind-key -T prefix c choose-window

setw -g monitor-activity on
set -g visual-activity on

set-option -g remain-on-exit on
set-option -g automatic-rename off

# }}}


